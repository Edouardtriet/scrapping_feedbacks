<div class="container py-4">
  <div class="card p-4">
    <h2 class="mb-4">Select Countries to Analyze</h2>

    <p class="text-muted mb-4">Choose which countries' app reviews you want to include in the analysis</p>

    <%= form_with url: timeframe_search_path(@app), method: :get, id: "countriesForm",
                  data: {
                    controller: "country-selection",
                    action: "submit->country-selection#validateForm"
                  } do |f| %>
      <div class="mb-4">
        <div class="form-check mb-3">
          <input class="form-check-input" type="checkbox" value="all" id="selectAll" checked
                 data-country-selection-target="selectAll"
                 data-action="change->country-selection#toggleSelectAll">
          <label class="form-check-label" for="selectAll">
            Select All Countries
          </label>
        </div>

        <div class="row mb-4">
          <div class="col-md-4">
            <div class="form-check mb-3">
              <%= f.check_box :countries, {
                multiple: true,
                class: "form-check-input country-checkbox",
                checked: true,
                id: "countries_us",
                data: {
                  country_selection_target: "country",
                  action: "change->country-selection#updateSelectAllCheckbox"
                }
              }, "us", nil %>
              <label class="form-check-label" for="countries_us">
                ðŸ‡ºðŸ‡¸ United States
              </label>
            </div>
          </div>

          <div class="col-md-4">
            <div class="form-check mb-3">
              <%= f.check_box :countries, {
                multiple: true,
                class: "form-check-input country-checkbox",
                checked: true,
                id: "countries_gb",
                data: {
                  country_selection_target: "country",
                  action: "change->country-selection#updateSelectAllCheckbox"
                }
              }, "gb", nil %>
              <label class="form-check-label" for="countries_gb">
                ðŸ‡¬ðŸ‡§ United Kingdom
              </label>
            </div>
          </div>

          <div class="col-md-4">
            <div class="form-check mb-3">
              <%= f.check_box :countries, {
                multiple: true,
                class: "form-check-input country-checkbox",
                checked: true,
                id: "countries_fr",
                data: {
                  country_selection_target: "country",
                  action: "change->country-selection#updateSelectAllCheckbox"
                }
              }, "fr", nil %>
              <label class="form-check-label" for="countries_fr">
                ðŸ‡«ðŸ‡· France
              </label>
            </div>
          </div>

          <div class="col-md-4">
            <div class="form-check mb-3">
              <%= f.check_box :countries, {
                multiple: true,
                class: "form-check-input country-checkbox",
                checked: true,
                id: "countries_de",
                data: {
                  country_selection_target: "country",
                  action: "change->country-selection#updateSelectAllCheckbox"
                }
              }, "de", nil %>
              <label class="form-check-label" for="countries_de">
                ðŸ‡©ðŸ‡ª Germany
              </label>
            </div>
          </div>

          <div class="col-md-4">
            <div class="form-check mb-3">
              <%= f.check_box :countries, {
                multiple: true,
                class: "form-check-input country-checkbox",
                checked: true,
                id: "countries_es",
                data: {
                  country_selection_target: "country",
                  action: "change->country-selection#updateSelectAllCheckbox"
                }
              }, "es", nil %>
              <label class="form-check-label" for="countries_es">
                ðŸ‡ªðŸ‡¸ Spain
              </label>
            </div>
          </div>

          <div class="col-md-4">
            <div class="form-check mb-3">
              <%= f.check_box :countries, {
                multiple: true,
                class: "form-check-input country-checkbox",
                checked: true,
                id: "countries_ca",
                data: {
                  country_selection_target: "country",
                  action: "change->country-selection#updateSelectAllCheckbox"
                }
              }, "ca", nil %>
              <label class="form-check-label" for="countries_ca">
                ðŸ‡¨ðŸ‡¦ Canada
              </label>
            </div>
          </div>
        </div>
      </div>

      <div class="d-flex justify-content-between">
        <%= link_to "Back", search_path(query: @app.name), class: "btn btn-outline-secondary" %>
        <%= f.submit "Next: Set Timeframe", class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>
</div>
